<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title> 
			最新文章 -
			
			苏思洋的博客 </title>
		
		<meta name="author" content="susu">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- HTML5 shim, for IE6-8 support of HTML elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<link href="/assets/style.min.css?body=3.3.1" rel="stylesheet" type="text/css" media="all">
		<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有文章" href="feed.xml" />
		<link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
		<!-- fav and touch icons -->
		<!-- Update these with your own images
		<link rel="shortcut icon" href="images/favicon.ico">
		<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
		<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
		-->
	</head>

	<body>
		<div class="navbar">
			<img id="profile" src="/blog-assets/susu.jpg" alt="susu" class="rollIn animated">
			<ul class="nav">
				
				
				 
 
    
      
    
  
    
  
    
      
      	
				
				<li id="label1" class="active labels"><a href="/index.html" class="active">最新文章</a></li>
				
		
		
		
      
    
  
    
      
      	
		<li id="label2" class="labels"><a href="/other.html">
			
				杂谈
			
		</a></li>
	
      	
      
    
  
    
      
      	
		<li id="label3" class="labels"><a href="/qianduan.html">
			
				前端技术
			
		</a></li>
	
      	
      
    
  
    
      
    
  
    
      
      	
		<li id="label4" class="labels"><a href="/tec_css.html">
			
				交互设计
			
		</a></li>
	
      	
      
    
  
    
      
      	
		<li id="label5" class="labels"><a href="/view_des.html">
			
				视觉设计
			
		</a></li>
	
      	
      
    
  



			</ul>
			<div class="f_like">
			<div>友链</div>
			<ul class="links">
				
                 <li class="link"><a href="http://hyq.me" title="hyq">hyq</a></li>
                                                
                 <li class="link"><a href="http://www.tetequ.com" title="特特区-音视频在线工具">特特区-音视频在线工具</a></li>
                                                
                 <li class="link"><a href="http://www.dlmu.net" title="启航计算机协会">启航计算机协会</a></li>
                                                
			</ul>
			</div>
		</div>
		
			
		
		<div id="sidebar">
			<div id="title_wrap" class="title1">
				<h2 class="title">最新文章</h2>
			</div>
			
				<ul class="posts">
				  
				    <li><a class="cate title1" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/11/26/cross-domian"><span class="circle_icon"></span>JavaScript 跨域访问的问题和解决过程<span class='date'>26 Nov 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E4%BA%A4%E4%BA%92%E8%AE%BE%E8%AE%A1/2013/11/11/qushi"><span class="circle_icon"></span>当下网页设计趋势<span class='date'>11 Nov 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/11/07/javascript-tip"><span class="circle_icon"></span>javascript 小技巧<span class='date'>07 Nov 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/25/31CSS"><span class="circle_icon"></span>31 种 CSS 选择器用法<span class='date'>25 Oct 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E6%9D%82%E8%B0%88/2013/10/16/web_advice"><span class="circle_icon"></span>对前端开发初学者的一些建议<span class='date'>16 Oct 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E4%BA%A4%E4%BA%92%E8%AE%BE%E8%AE%A1/2013/10/13/youhua"><span class="circle_icon"></span>如何通过数据指导产品优化<span class='date'>13 Oct 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/05/Responsive_Web_Design_step"><span class="circle_icon"></span>复杂产品的响应式设计【流程篇】<span class='date'>05 Oct 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/05/Responsive_Web_Design"><span class="circle_icon"></span>响应式网页设计<span class='date'>05 Oct 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E8%A7%86%E8%A7%89%E8%AE%BE%E8%AE%A1/2013/10/04/DisabledStateTwoOrThreeThings"><span class="circle_icon"></span>浅谈禁用状态<span class='date'>04 Oct 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/03/qianduan"><span class="circle_icon"></span>前端的困局与突围(from 玉伯)<span class='date'>03 Oct 2013</span></a></li>
				  
				    <li><a class="cate title1" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/03/markdown"><span class="circle_icon"></span>如何使用markdown<span class='date'>03 Oct 2013</span></a></li>
				  
				</ul>
			

		</div>
		<div id="container">
			<button class="navbar-toggle" type="button">
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
      		</button>
			<div id="pjax">
				<article id="post" class="title1">
					<header id="header">
						<h1 id="identifier">
							
								JavaScript 跨域访问的问题和解决过程
							
						</h1>
					</header>
					<div id="content">
						<h1></h1>

<p>分享一下最近用jQuery跨域请求的经历，希望能给大家一些关于这个方案的概念和资料。</p>

<p>1.代码很简单</p>

<div class="highlight"><pre><code class="text language-text" data-lang="text">$.ajax({
    url: &#39;http://www.tetequ.com&#39;,
    type: &#39;GET&#39;
}).done(function() {
    console.log(&quot;success&quot;);
}).fail(function() {
    console.log(&quot;error&quot;);
}).always(function() {
    console.log(&quot;complete&quot;);
});
</code></pre></div>

<p>上去运行一下......
当然不能用!什么都还没做呢，就想做跨域访问这么危险的事情,嘿嘿！</p>

<p>下面是Chrome给出的错误提示 </p>

<p><img src="/blog-assets/2013-12-25/1.png" alt="网页设计"></p>

<p>2.在服务器端做点手脚(php为例)</p>

<div class="highlight"><pre><code class="text language-text" data-lang="text">header(&quot;Access-Control-Allow-Origin:*&quot;);// 可以设置为详细的地址
</code></pre></div>

<p>3.好了现在Chrome中的Get已经可以运行了。</p>

<p>4.还有问题。。。。忽然发现在IE8和IE9中无法运行，而在其他的浏览器中都正常（opera未测试，google说这个浏览器也有问题。不过这东西比较小众）
使用Fiddler发现 这个动作根本没有被提交到服务器端。。。。
这是多么痛的领悟啊。（IE 为什么每次你都这么另类！，jQuery你为什么不兼容ie8和ie9的跨域提交功能。。加点代码很麻烦么！！！）</p>

<p>最后用各种方法知道了---</p>

<p>IE8以上的版本跨域提交需要使用XDomainRequest 对象。。。。关于 XDomainRequest 请在这里查看详细，<a href="http://msdn.microsoft.com/en-us/library/cc288060(VS.85).aspx">http://msdn.microsoft.com/en-us/library/cc288060(VS.85).aspx</a></p>

<p>解决代码如下：</p>

<div class="highlight"><pre><code class="text language-text" data-lang="text">var xdr = new XDomainRequest();
        xdr.onload = function (e) {
            var data = $.parseJSON(xdr.responseText);
            if (data == null || typeof (data) == &#39;undefined&#39;) {
                data = $.parseJSON(data.firstChild.textContent);
            }
            //success
        };
        xdr.onerror = function (e) {
            //error
        }

        xdr.open(&quot;GET&quot;, url);
        xdr.send();
</code></pre></div>

<p>5.问题算是解决了get都可以了。还有问题IE11你又出来干嘛了。。。你居然没有XDomainRequest。多么坑爹啊。还好IE11可以用标准的提交跨域。只是判别的时候有点蛋疼。</p>

<div class="highlight"><pre><code class="text language-text" data-lang="text">navigator.userAgent.toLowerCase().match(/(msie\s|trident.*rv:)([\w.]+)/)
</code></pre></div>

<p>这个能否判断IE11自己试着办哈。。</p>

<p><strong><em>本人水平有限，如果有所遗漏和谬误，请各位朋友指正，希望一起讨论学习和进步</em></strong></p>

					</div>
				</article>
			</div>
		</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="/assets/index.min.js?body=4.0.0"></script>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ffbcbbadeaf00526725e0f222ba832804' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46315687-1', 'ssy.me');
  ga('send', 'pageview');

</script>
	</body>
</html>