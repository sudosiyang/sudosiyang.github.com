<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>
			JavaScript规范 -

			苏思洋的博客 </title>

		<meta name="author" content="susu">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- HTML5 shim, for IE6-8 support of HTML elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<link href="/assets/style.min.css?body=3.3.1" rel="stylesheet" type="text/css" media="all">
		<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有文章" href="feed.xml" />
		<link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
		<!-- fav and touch icons -->
		<!-- Update these with your own images
		<link rel="shortcut icon" href="images/favicon.ico">
		<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
		<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
		-->
	</head>

	<body>
		<div class="navbar">
			<img id="profile" src="/blog-assets/susu.jpg" alt="susu" class="rollIn animated">
			<ul class="nav">













		<li id="label1" class="labels"><a href="/">

				最新文章

		</a></li>








		<li id="label2" class="labels"><a href="/other">

				杂谈

		</a></li>









				<li id="label3" class="active labels"><a href="/qianduan" class="active">前端技术</a></li>














		<li id="label4" class="labels"><a href="/tec_css">

				交互设计

		</a></li>








		<li id="label5" class="labels"><a href="/view_des">

				视觉设计

		</a></li>








			</ul>
			<div class="f_like">
			<div>友链</div>
			<ul class="links">

                 <li class="link"><a href="http://hyq.me" title="hyq">hyq</a></li>

                 <li class="link"><a href="http://catalystdp.github.io/" title="catalystdp">catalystdp</a></li>

			</ul>
			</div>
		</div>
		<div id="sidebar">
			<div id="title_wrap" class=" title3">
				<h2 class="title">










							前端技术








				</h2>
			</div>


					<ul class="posts">








      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/12/01/web_build"><span class="circle_icon"></span>前端工程化技能树整理<span class='date'>01 Dec 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/11/30/es6_Design-pattern"><span class="circle_icon"></span>ES6 实现几种 设计模式<span class='date'>30 Nov 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/11/23/es7_decorator"><span class="circle_icon"></span>ES7 Decorator 装饰者模式 浅出<span class='date'>23 Nov 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/11/10/requestAnimationFrame"><span class="circle_icon"></span>requestAnimationFrame 详解<span class='date'>10 Nov 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/05/14/css_BFC"><span class="circle_icon"></span>BFC 神奇背后的原理<span class='date'>14 May 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/05/12/js-opt"><span class="circle_icon"></span>前端性能优化实践<span class='date'>12 May 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/04/29/learn-web"><span class="circle_icon"></span>2015年值得关注的几个WEB技术<span class='date'>29 Apr 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/04/10/HTTP_API"><span class="circle_icon"></span>HTTP API 设计指南<span class='date'>10 Apr 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/04/09/html_guid"><span class="circle_icon"></span>HTML编码规范<span class='date'>09 Apr 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/03/31/less_guide"><span class="circle_icon"></span>Less规范<span class='date'>31 Mar 2015</span></a></li>







      	<li class="active"><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/03/31/javascript_guide" class="active"><span class="circle_icon"></span>JavaScript规范<span class='date'>31 Mar 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/03/31/css_guide"><span class="circle_icon"></span>CSS规范<span class='date'>31 Mar 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/03/16/javascript_tip"><span class="circle_icon"></span>前端小技巧总结<span class='date'>16 Mar 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/03/13/pm2"><span class="circle_icon"></span>用pm2管理node进程<span class='date'>13 Mar 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2015/03/13/pm2-web"><span class="circle_icon"></span>pm2-web监控node.js应用服务状态<span class='date'>13 Mar 2015</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2014/08/13/nodejs_update"><span class="circle_icon"></span>node.js升级<span class='date'>13 Aug 2014</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2014/04/11/Canvas_API"><span class="circle_icon"></span>Canvas API<span class='date'>11 Apr 2014</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2014/01/21/html-zhuanyi"><span class="circle_icon"></span>JavaScript 的HTML转义方法<span class='date'>21 Jan 2014</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2014/01/09/IE-iframe-P3P"><span class="circle_icon"></span>IE下iframe跨域session丢失问题和解决<span class='date'>09 Jan 2014</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/11/26/cross-domian"><span class="circle_icon"></span>JavaScript 跨域访问的问题和解决过程<span class='date'>26 Nov 2013</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/11/07/javascript-tip"><span class="circle_icon"></span>javascript 小技巧<span class='date'>07 Nov 2013</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/25/31CSS"><span class="circle_icon"></span>31 种 CSS 选择器用法<span class='date'>25 Oct 2013</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/05/Responsive_Web_Design_step"><span class="circle_icon"></span>复杂产品的响应式设计【流程篇】<span class='date'>05 Oct 2013</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/05/Responsive_Web_Design"><span class="circle_icon"></span>响应式网页设计<span class='date'>05 Oct 2013</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/03/qianduan"><span class="circle_icon"></span>前端的困局与突围(from 玉伯)<span class='date'>03 Oct 2013</span></a></li>







      	<li><a class="cate title3" href="/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/2013/10/03/markdown"><span class="circle_icon"></span>如何使用markdown<span class='date'>03 Oct 2013</span></a></li>







					</ul>











		</div>
		<div id="container">
			<button class="navbar-toggle" type="button">
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
      		</button>
			<div id="pjax">
				<article id="post" class="title3">
					<header id="header">
						<h1 id="identifier">
								JavaScript规范
						</h1>
					</header>
					<div id="content">
						<h2 id="内容列表"><a name="TOC">内容列表</a></h2>

<ol>
  <li><a href="#types">类型</a></li>
  <li><a href="#objects">对象</a></li>
  <li><a href="#arrays">数组</a></li>
  <li><a href="#strings">字符串</a></li>
  <li><a href="#functions">函数</a></li>
  <li><a href="#properties">属性</a></li>
  <li><a href="#variables">变量</a></li>
  <li><a href="#conditionals">条件表达式和等号</a></li>
  <li><a href="#blocks">块</a></li>
  <li><a href="#comments">注释</a></li>
  <li><a href="#whitespace">空白</a></li>
  <li><a href="#commas">逗号</a></li>
  <li><a href="#semicolons">分号</a></li>
  <li><a href="#type-coercion">类型转换</a></li>
  <li><a href="#naming-conventions">命名约定</a></li>
  <li><a href="#accessors">存取器</a></li>
  <li><a href="#constructors">构造器</a></li>
  <li><a href="#events">事件</a></li>
  <li><a href="#modules">模块</a></li>
  <li><a href="#jquery">jQuery</a></li>
</ol>

<h2 id="类型"><a name="types">类型</a></h2>

<ul>
  <li>
    <p><strong>原始值</strong>: 相当于传值</p>

    <ul>
      <li><code class="highlighter-rouge">string</code></li>
      <li><code class="highlighter-rouge">number</code></li>
      <li><code class="highlighter-rouge">boolean</code></li>
      <li><code class="highlighter-rouge">null</code></li>
      <li><code class="highlighter-rouge">undefined</code></li>
    </ul>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">bar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>

<span class="nx">bar</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">);</span> <span class="c1">// =&gt; 1, 9</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><strong>复杂类型</strong>: 相当于传引用</p>

    <ul>
      <li><code class="highlighter-rouge">object</code></li>
      <li><code class="highlighter-rouge">array</code></li>
      <li><code class="highlighter-rouge">function</code></li>
    </ul>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="nx">bar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>

<span class="nx">bar</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">foo</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">bar</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">// =&gt; 9, 9</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="对象"><a name="objects">对象</a></h2>

<ul>
  <li>
    <p>使用字面值创建对象</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="p">{};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>不要使用保留字 <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words">reserved words</a> 作为键</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">superman</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">class</span><span class="p">:</span> <span class="s1">'superhero'</span><span class="p">,</span>
  <span class="na">default</span><span class="p">:</span> <span class="p">{</span> <span class="na">clark</span><span class="p">:</span> <span class="s1">'kent'</span> <span class="p">},</span>
  <span class="na">private</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">superman</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">klass</span><span class="p">:</span> <span class="s1">'superhero'</span><span class="p">,</span>
  <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span> <span class="na">clark</span><span class="p">:</span> <span class="s1">'kent'</span> <span class="p">},</span>
  <span class="na">hidden</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>
</code></pre>
    </div>
    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="数组"><a name="arrays">数组</a></h2>

<ul>
  <li>
    <p>使用字面值创建数组</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[];</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>如果你不知道数组的长度，使用push</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">someStack</span> <span class="o">=</span> <span class="p">[];</span>


<span class="c1">// bad</span>
<span class="nx">someStack</span><span class="p">[</span><span class="nx">someStack</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'abracadabra'</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="nx">someStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'abracadabra'</span><span class="p">);</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>当你需要拷贝数组时使用slice. <a href="http://jsperf.com/converting-arguments-to-an-array/7">jsPerf</a></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">itemsCopy</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">i</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">itemsCopy</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="nx">itemsCopy</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>使用slice将类数组的对象转成数组.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">trigger</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="字符串"><a name="strings">字符串</a></h2>

<ul>
  <li>
    <p>对字符串使用单引号 <code class="highlighter-rouge">''</code></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">"Bob Parr"</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">'Bob Parr'</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">fullName</span> <span class="o">=</span> <span class="s2">"Bob "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">fullName</span> <span class="o">=</span> <span class="s1">'Bob '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>超过80个字符的字符串应该使用字符串连接换行</li>
  <li>
    <p>注: 如果过度使用，长字符串连接可能会对性能有影响. <a href="http://jsperf.com/ya-string-concat">jsPerf</a> &amp; <a href="https://github.com/airbnb/javascript/issues/40">Discussion</a></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="s1">'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.'</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="s1">'This is a super long error that \
was thrown because of Batman. \
When you stop to think about \
how Batman had anything to do \
with this, you would get nowhere \
fast.'</span><span class="p">;</span>


<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="s1">'This is a super long error that '</span> <span class="o">+</span>
  <span class="s1">'was thrown because of Batman.'</span> <span class="o">+</span>
  <span class="s1">'When you stop to think about '</span> <span class="o">+</span>
  <span class="s1">'how Batman had anything to do '</span> <span class="o">+</span>
  <span class="s1">'with this, you would get nowhere '</span> <span class="o">+</span>
  <span class="s1">'fast.'</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>编程时使用join而不是字符串连接来构建字符串，特别是IE: <a href="http://jsperf.com/string-vs-array-concat/2">jsPerf</a>.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">items</span><span class="p">,</span>
    <span class="nx">messages</span><span class="p">,</span>
    <span class="nx">length</span><span class="p">,</span> <span class="nx">i</span><span class="p">;</span>

<span class="nx">messages</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="na">state</span><span class="p">:</span> <span class="s1">'success'</span><span class="p">,</span>
    <span class="na">message</span><span class="p">:</span> <span class="s1">'This one worked.'</span>
<span class="p">},{</span>
    <span class="na">state</span><span class="p">:</span> <span class="s1">'success'</span><span class="p">,</span>
    <span class="na">message</span><span class="p">:</span> <span class="s1">'This one worked as well.'</span>
<span class="p">},{</span>
    <span class="na">state</span><span class="p">:</span> <span class="s1">'error'</span><span class="p">,</span>
    <span class="na">message</span><span class="p">:</span> <span class="s1">'This one did not work.'</span>
<span class="p">}];</span>

<span class="nx">length</span> <span class="o">=</span> <span class="nx">messages</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">inbox</span><span class="p">(</span><span class="nx">messages</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">items</span> <span class="o">=</span> <span class="s1">'&lt;ul&gt;'</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">items</span> <span class="o">+=</span> <span class="s1">'&lt;li&gt;'</span> <span class="o">+</span> <span class="nx">messages</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">message</span> <span class="o">+</span> <span class="s1">'&lt;/li&gt;'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">items</span> <span class="o">+</span> <span class="s1">'&lt;/ul&gt;'</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">inbox</span><span class="p">(</span><span class="nx">messages</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">items</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">messages</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">message</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="s1">'&lt;ul&gt;&lt;li&gt;'</span> <span class="o">+</span> <span class="nx">items</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">'&lt;/li&gt;&lt;li&gt;'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'&lt;/li&gt;&lt;/ul&gt;'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="函数"><a name="functions">函数</a></h2>

<ul>
  <li>
    <p>函数表达式:</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// 匿名函数表达式</span>
<span class="kd">var</span> <span class="nx">anonymous</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// 有名函数表达式</span>
<span class="kd">var</span> <span class="nx">named</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">named</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// 立即调用函数表达式</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Welcome to the Internet. Please follow me.'</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre>
    </div>
  </li>
  <li>绝对不要在一个非函数块里声明一个函数，把那个函数赋给一个变量。浏览器允许你这么做，但是它们解析不同。</li>
  <li>
    <p><strong>注:</strong> ECMA-262定义把<code class="highlighter-rouge">块</code>定义为一组语句，函数声明不是一个语句。<a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf#page=97">阅读ECMA-262对这个问题的说明</a>.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">currentUser</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Nope.'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">currentUser</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Yup.'</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>绝对不要把参数命名为 <code class="highlighter-rouge">arguments</code>, 这将会逾越函数作用域内传过来的 <code class="highlighter-rouge">arguments</code> 对象.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">nope</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">yup</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="属性"><a name="properties">属性</a></h2>

<ul>
  <li>
    <p>当使用变量访问属性时使用中括号.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">luke</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">jedi</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">28</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">getProp</span><span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">luke</span><span class="p">[</span><span class="nx">prop</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">isJedi</span> <span class="o">=</span> <span class="nx">getProp</span><span class="p">(</span><span class="s1">'jedi'</span><span class="p">);</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="变量"><a name="variables">变量</a></h2>

<ul>
  <li>
    <p>总是使用 <code class="highlighter-rouge">var</code> 来声明变量，如果不这么做将导致产生全局变量，我们要避免污染全局命名空间。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="nx">superPower</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SuperPower</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">superPower</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SuperPower</span><span class="p">();</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>使用一个 <code class="highlighter-rouge">var</code> 以及新行声明多个变量，缩进4个空格。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">getItems</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">goSportsTeam</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">dragonball</span> <span class="o">=</span> <span class="s1">'z'</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">getItems</span><span class="p">(),</span>
    <span class="nx">goSportsTeam</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">dragonball</span> <span class="o">=</span> <span class="s1">'z'</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>最后再声明未赋值的变量，当你想引用之前已赋值变量的时候很有用。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">len</span><span class="p">,</span> <span class="nx">dragonball</span><span class="p">,</span>
    <span class="nx">items</span> <span class="o">=</span> <span class="nx">getItems</span><span class="p">(),</span>
    <span class="nx">goSportsTeam</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">getItems</span><span class="p">(),</span>
    <span class="nx">dragonball</span><span class="p">,</span>
    <span class="nx">goSportsTeam</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">len</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">getItems</span><span class="p">(),</span>
    <span class="nx">goSportsTeam</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">dragonball</span><span class="p">,</span>
    <span class="nx">length</span><span class="p">,</span>
    <span class="nx">i</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>在作用域顶部声明变量，避免变量声明和赋值引起的相关问题。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">test</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'doing stuff..'</span><span class="p">);</span>

  <span class="c1">//..other stuff..</span>

  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">getName</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">'test'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">getName</span><span class="p">();</span>

  <span class="nx">test</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'doing stuff..'</span><span class="p">);</span>

  <span class="c1">//..other stuff..</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">'test'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">getName</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">getName</span><span class="p">();</span>

  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="条件表达式和等号"><a name="conditionals">条件表达式和等号</a></h2>

<ul>
  <li>适当使用 <code class="highlighter-rouge">===</code> 和 <code class="highlighter-rouge">!==</code> 以及 <code class="highlighter-rouge">==</code> 和 <code class="highlighter-rouge">!=</code>.</li>
  <li>
    <p>条件表达式的强制类型转换遵循以下规则：</p>

    <ul>
      <li><strong>对象</strong> 被计算为 <strong>true</strong></li>
      <li><strong>Undefined</strong> 被计算为 <strong>false</strong></li>
      <li><strong>Null</strong> 被计算为 <strong>false</strong></li>
      <li><strong>布尔值</strong> 被计算为 <strong>布尔的值</strong></li>
      <li><strong>数字</strong> 如果是 <strong>+0, -0, or NaN</strong> 被计算为 <strong>false</strong> , 否则为 <strong>true</strong></li>
      <li><strong>字符串</strong> 如果是空字符串 <code class="highlighter-rouge">''</code> 则被计算为 <strong>false</strong>, 否则为 <strong>true</strong></li>
    </ul>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">([</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
  <span class="c1">// true</span>
  <span class="c1">// An array is an object, objects evaluate to true</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>使用快捷方式.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">!==</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>阅读 <a href="http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/#more-2108">Truth Equality and JavaScript</a> 了解更多</p>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="块"><a name="blocks">块</a></h2>

<ul>
  <li>
    <p>给所有多行的块使用大括号</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">test</span><span class="p">)</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="注释"><a name="comments">注释</a></h2>

<ul>
  <li>
    <p>使用 <code class="highlighter-rouge">/** ... */</code> 进行多行注释，包括描述，指定类型以及参数值和返回值</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="c1">// make() returns a new element</span>
<span class="c1">// based on the passed in tag name</span>
<span class="c1">//</span>
<span class="c1">// @param &lt;String&gt; tag</span>
<span class="c1">// @return &lt;Element&gt; element</span>
<span class="kd">function</span> <span class="nx">make</span><span class="p">(</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// ...stuff...</span>

  <span class="k">return</span> <span class="nx">element</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="cm">/**
 * make() returns a new element
 * based on the passed in tag name
 *
 * @param &lt;String&gt; tag
 * @return &lt;Element&gt; element
 */</span>
<span class="kd">function</span> <span class="nx">make</span><span class="p">(</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// ...stuff...</span>

  <span class="k">return</span> <span class="nx">element</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>使用 <code class="highlighter-rouge">//</code> 进行单行注释，在评论对象的上面进行单行注释，注释前放一个空行.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>  <span class="c1">// is current tab</span>

<span class="c1">// good</span>
<span class="c1">// is current tab</span>
<span class="kd">var</span> <span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">getType</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'fetching type...'</span><span class="p">);</span>
  <span class="c1">// set the default type to 'no type'</span>
  <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_type</span> <span class="o">||</span> <span class="s1">'no type'</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">type</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">getType</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'fetching type...'</span><span class="p">);</span>

  <span class="c1">// set the default type to 'no type'</span>
  <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_type</span> <span class="o">||</span> <span class="s1">'no type'</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">type</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>如果你有一个问题需要重新来看一下或如果你建议一个需要被实现的解决方法的话需要在你的注释前面加上 <code class="highlighter-rouge">FIXME</code> 或 <code class="highlighter-rouge">TODO</code> 帮助其他人迅速理解</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Calculator</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// FIXME: shouldn't use a global here</span>
  <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Calculator</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// TODO: total should be configurable by an options param</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="空白"><a name="whitespace">空白</a></h2>

<ul>
  <li>
    <p>将tab设为4个空格</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="err">∙∙</span><span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="err">∙</span><span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="err">∙∙∙∙</span><span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>大括号前放一个空格</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">test</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'test'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'test'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'attr'</span><span class="p">,{</span>
  <span class="na">age</span><span class="p">:</span> <span class="s1">'1 year'</span><span class="p">,</span>
  <span class="na">breed</span><span class="p">:</span> <span class="s1">'Bernese Mountain Dog'</span>
<span class="p">});</span>

<span class="c1">// good</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'attr'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">age</span><span class="p">:</span> <span class="s1">'1 year'</span><span class="p">,</span>
  <span class="na">breed</span><span class="p">:</span> <span class="s1">'Bernese Mountain Dog'</span>
<span class="p">});</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>在做长方法链时使用缩进.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'#items'</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'.selected'</span><span class="p">).</span><span class="nx">highlight</span><span class="p">().</span><span class="nx">end</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s1">'.open'</span><span class="p">).</span><span class="nx">updateCount</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'#items'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'.selected'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">highlight</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'.open'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">updateCount</span><span class="p">();</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">leds</span> <span class="o">=</span> <span class="nx">stage</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s1">'.led'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s1">'svg:svg'</span><span class="p">).</span><span class="kr">class</span><span class="p">(</span><span class="s1">'led'</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span>  <span class="p">(</span><span class="nx">radius</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">'svg:g'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'transform'</span><span class="p">,</span> <span class="s1">'translate('</span> <span class="o">+</span> <span class="p">(</span><span class="nx">radius</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">)</span> <span class="o">+</span> <span class="s1">','</span> <span class="o">+</span> <span class="p">(</span><span class="nx">radius</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">)</span> <span class="o">+</span> <span class="s1">')'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">tron</span><span class="p">.</span><span class="nx">led</span><span class="p">);</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">leds</span> <span class="o">=</span> <span class="nx">stage</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s1">'.led'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s1">'svg:svg'</span><span class="p">)</span>
    <span class="p">.</span><span class="kr">class</span><span class="p">(</span><span class="s1">'led'</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span>  <span class="p">(</span><span class="nx">radius</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'svg:g'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'transform'</span><span class="p">,</span> <span class="s1">'translate('</span> <span class="o">+</span> <span class="p">(</span><span class="nx">radius</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">)</span> <span class="o">+</span> <span class="s1">','</span> <span class="o">+</span> <span class="p">(</span><span class="nx">radius</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">)</span> <span class="o">+</span> <span class="s1">')'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">tron</span><span class="p">.</span><span class="nx">led</span><span class="p">);</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="逗号"><a name="commas">逗号</a></h2>

<ul>
  <li>
    <p>不要将逗号放前面</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">once</span>
  <span class="p">,</span> <span class="nx">upon</span>
  <span class="p">,</span> <span class="nx">aTime</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">once</span><span class="p">,</span>
    <span class="nx">upon</span><span class="p">,</span>
    <span class="nx">aTime</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">hero</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="s1">'Bob'</span>
  <span class="p">,</span> <span class="na">lastName</span><span class="p">:</span> <span class="s1">'Parr'</span>
  <span class="p">,</span> <span class="na">heroName</span><span class="p">:</span> <span class="s1">'Mr. Incredible'</span>
  <span class="p">,</span> <span class="na">superPower</span><span class="p">:</span> <span class="s1">'strength'</span>
<span class="p">};</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">hero</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="s1">'Bob'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="s1">'Parr'</span><span class="p">,</span>
  <span class="na">heroName</span><span class="p">:</span> <span class="s1">'Mr. Incredible'</span><span class="p">,</span>
  <span class="na">superPower</span><span class="p">:</span> <span class="s1">'strength'</span>
<span class="p">};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>不要加多余的逗号，这可能会在IE下引起错误，同时如果多一个逗号某些ES3的实现会计算多数组的长度。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">hero</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="s1">'Kevin'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="s1">'Flynn'</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">heroes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'Batman'</span><span class="p">,</span>
  <span class="s1">'Superman'</span><span class="p">,</span>
<span class="p">];</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">hero</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="s1">'Kevin'</span><span class="p">,</span>
  <span class="na">lastName</span><span class="p">:</span> <span class="s1">'Flynn'</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">heroes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'Batman'</span><span class="p">,</span>
  <span class="s1">'Superman'</span>
<span class="p">];</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="分号"><a name="semicolons">分号</a></h2>

<ul>
  <li>
    <p>语句结束一定要加分号</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">'Skywalker'</span>
  <span class="k">return</span> <span class="nx">name</span>
<span class="p">})()</span>

<span class="c1">// good</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">'Skywalker'</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">})();</span>

<span class="c1">// good</span>
<span class="p">;(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">'Skywalker'</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">})();</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="类型转换"><a name="type-coercion">类型转换</a></h2>

<ul>
  <li>在语句的开始执行类型转换.</li>
  <li>
    <p>字符串:</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">//  =&gt; this.reviewScore = 9;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">totalScore</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">reviewScore</span> <span class="o">+</span> <span class="s1">''</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">totalScore</span> <span class="o">=</span> <span class="s1">''</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">reviewScore</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">totalScore</span> <span class="o">=</span> <span class="s1">''</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">reviewScore</span> <span class="o">+</span> <span class="s1">' total score'</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">totalScore</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">reviewScore</span> <span class="o">+</span> <span class="s1">' total score'</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>对数字使用 <code class="highlighter-rouge">parseInt</code> 并且总是带上类型转换的基数.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">inputValue</span> <span class="o">=</span> <span class="s1">'4'</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">);</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="o">+</span><span class="nx">inputValue</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">inputValue</span> <span class="o">&gt;&gt;</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">);</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">);</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

<span class="c1">// good</span>
<span class="cm">/**
 * parseInt was the reason my code was slow.
 * Bitshifting the String to coerce it to a
 * Number made it a lot faster.
 */</span>
<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">inputValue</span> <span class="o">&gt;&gt;</span> <span class="mi">0</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>布尔值:</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">hasAge</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">hasAge</span> <span class="o">=</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">hasAge</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">age</span><span class="p">;</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="命名约定"><a name="naming-conventions">命名约定</a></h2>

<ul>
  <li>
    <p>避免单个字符名，让你的变量名有描述意义。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">q</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">query</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ..stuff..</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>当命名对象、函数和实例时使用驼峰命名规则</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">OBJEcttsssss</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">this_is_my_object</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="k">this</span><span class="o">-</span><span class="nx">is</span><span class="o">-</span><span class="nx">my</span><span class="o">-</span><span class="nx">object</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">function</span> <span class="nx">c</span><span class="p">()</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">u</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">user</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'Bob Parr'</span>
<span class="p">});</span>

<span class="c1">// good</span>
<span class="kd">var</span> <span class="nx">thisIsMyObject</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">function</span> <span class="nx">thisIsMyFunction</span><span class="p">()</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'Bob Parr'</span>
<span class="p">});</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>当命名构造函数或类时使用驼峰式大写</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">user</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">bad</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">user</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'nope'</span>
<span class="p">});</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">User</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">good</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'yup'</span>
<span class="p">});</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>命名私有属性时前面加个下划线 <code class="highlighter-rouge">_</code></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="k">this</span><span class="p">.</span><span class="nx">__firstName__</span> <span class="o">=</span> <span class="s1">'Panda'</span><span class="p">;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">firstName_</span> <span class="o">=</span> <span class="s1">'Panda'</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="k">this</span><span class="p">.</span><span class="nx">_firstName</span> <span class="o">=</span> <span class="s1">'Panda'</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>当保存对 <code class="highlighter-rouge">this</code> 的引用时使用 <code class="highlighter-rouge">_this</code>.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">that</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">_this</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="存取器"><a name="accessors">存取器</a></h2>

<ul>
  <li>属性的存取器函数不是必需的</li>
  <li>
    <p>如果你确实有存取器函数的话使用getVal() 和 setVal(‘hello’)</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="nx">dragon</span><span class="p">.</span><span class="nx">age</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="nx">dragon</span><span class="p">.</span><span class="nx">getAge</span><span class="p">();</span>

<span class="c1">// bad</span>
<span class="nx">dragon</span><span class="p">.</span><span class="nx">age</span><span class="p">(</span><span class="mi">25</span><span class="p">);</span>

<span class="c1">// good</span>
<span class="nx">dragon</span><span class="p">.</span><span class="nx">setAge</span><span class="p">(</span><span class="mi">25</span><span class="p">);</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>如果属性是布尔值，使用isVal() 或 hasVal()</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dragon</span><span class="p">.</span><span class="nx">age</span><span class="p">())</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dragon</span><span class="p">.</span><span class="nx">hasAge</span><span class="p">())</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>可以创建get()和set()函数，但是要保持一致</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Jedi</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">options</span> <span class="o">||</span> <span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{});</span>
  <span class="kd">var</span> <span class="nx">lightsaber</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">lightsaber</span> <span class="o">||</span> <span class="s1">'blue'</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'lightsaber'</span><span class="p">,</span> <span class="nx">lightsaber</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">get</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">};</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="构造器"><a name="constructors">构造器</a></h2>

<ul>
  <li>
    <p>给对象原型分配方法，而不是用一个新的对象覆盖原型，覆盖原型会使继承出现问题。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Jedi</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'new jedi'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">fight</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">fight</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'fighting'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="na">block</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">block</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'blocking'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// good</span>
<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fight</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">fight</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'fighting'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">block</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">block</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'blocking'</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>方法可以返回 <code class="highlighter-rouge">this</code> 帮助方法可链。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">jump</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">jumping</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setHeight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">luke</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Jedi</span><span class="p">();</span>
<span class="nx">luke</span><span class="p">.</span><span class="nx">jump</span><span class="p">();</span> <span class="c1">// =&gt; true</span>
<span class="nx">luke</span><span class="p">.</span><span class="nx">setHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="c1">// =&gt; undefined</span>

<span class="c1">// good</span>
<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">jump</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">jumping</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setHeight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">luke</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Jedi</span><span class="p">();</span>

<span class="nx">luke</span><span class="p">.</span><span class="nx">jump</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">setHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>可以写一个自定义的toString()方法，但是确保它工作正常并且不会有副作用。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Jedi</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">options</span> <span class="o">||</span> <span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span> <span class="o">||</span> <span class="s1">'no name'</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getName</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">getName</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Jedi</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">toString</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s1">'Jedi - '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getName</span><span class="p">();</span>
<span class="p">};</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="事件"><a name="events">事件</a></h2>

<ul>
  <li>
    <p>当给事件附加数据时，传入一个哈希而不是原始值，这可以让后面的贡献者加入更多数据到事件数据里而不用找出并更新那个事件的事件处理器</p>

    <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">'listingUpdated'</span><span class="p">,</span> <span class="nx">listing</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

<span class="p">...</span>

<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'listingUpdated'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">listingId</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do something with listingId</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>更好:</p>

    <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// good</span>
<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">'listingUpdated'</span><span class="p">,</span> <span class="p">{</span> <span class="na">listingId</span> <span class="p">:</span> <span class="nx">listing</span><span class="p">.</span><span class="nx">id</span> <span class="p">});</span>

<span class="p">...</span>

<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'listingUpdated'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do something with data.listingId</span>
<span class="p">});</span>
</code></pre>
    </div>
  </li>
</ul>

<p><strong><a href="#TOC">[⬆]</a></strong></p>

<h2 id="模块"><a name="modules">模块</a></h2>

<ul>
  <li>模块应该以 <code class="highlighter-rouge">!</code> 开始，这保证了如果一个有问题的模块忘记包含最后的分号在合并后不会出现错误</li>
  <li>这个文件应该以驼峰命名，并在同名文件夹下，同时导出的时候名字一致</li>
  <li>加入一个名为noConflict()的方法来设置导出的模块为之前的版本并返回它</li>
  <li>
    <p>总是在模块顶部声明 <code class="highlighter-rouge">'use strict';</code></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// fancyInput/fancyInput.js</span>

<span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
  <span class="s1">'use strict'</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">previousFancyInput</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">FancyInput</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">FancyInput</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="p">}</span>

  <span class="nx">FancyInput</span><span class="p">.</span><span class="nx">noConflict</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">noConflict</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">global</span><span class="p">.</span><span class="nx">FancyInput</span> <span class="o">=</span> <span class="nx">previousFancyInput</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">FancyInput</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">global</span><span class="p">.</span><span class="nx">FancyInput</span> <span class="o">=</span> <span class="nx">FancyInput</span><span class="p">;</span>
<span class="p">}(</span><span class="k">this</span><span class="p">);</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

<h2 id="jquery"><a name="jquery">jQuery</a></h2>

<ul>
  <li>
    <p>缓存jQuery查询</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">setSidebar</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.sidebar'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>

  <span class="c1">// ...stuff...</span>

  <span class="nx">$</span><span class="p">(</span><span class="s1">'.sidebar'</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span>
    <span class="s1">'background-color'</span><span class="p">:</span> <span class="s1">'pink'</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">setSidebar</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">$sidebar</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'.sidebar'</span><span class="p">);</span>
  <span class="nx">$sidebar</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>

  <span class="c1">// ...stuff...</span>

  <span class="nx">$sidebar</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
    <span class="s1">'background-color'</span><span class="p">:</span> <span class="s1">'pink'</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>对DOM查询使用级联的 <code class="highlighter-rouge">$('.sidebar ul')</code> 或 <code class="highlighter-rouge">$('.sidebar ul')</code>，<a href="http://jsperf.com/jquery-find-vs-context-sel/16">jsPerf</a></li>
  <li>
    <p>对有作用域的jQuery对象查询使用 <code class="highlighter-rouge">find</code></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'.sidebar'</span><span class="p">,</span> <span class="s1">'ul'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>

<span class="c1">// bad</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'.sidebar'</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'ul'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'.sidebar ul'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'.sidebar &gt; ul'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>

<span class="c1">// good (slower)</span>
<span class="nx">$sidebar</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'ul'</span><span class="p">);</span>

<span class="c1">// good (faster)</span>
<span class="nx">$</span><span class="p">(</span><span class="nx">$sidebar</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'ul'</span><span class="p">);</span>
</code></pre>
    </div>

    <p><strong><a href="#TOC">[⬆]</a></strong></p>
  </li>
</ul>

					</div>
				</article>
			</div>
			<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread">

<div id="bdshare" class="bdshare_t bds_tools get-codes-bdshare">
<a class="bds_tsina"></a>
<a class="bds_tqq"></a>
<a class="bds_renren"></a>
<a class="bds_hi"></a>
<span class="bds_more">更多</span>
</div>
<script type="text/javascript" id="bdshare_js" data="type=tools&amp;mini=1&amp;uid=6840238" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script>
	</div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"susiyang"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->

		</div>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.10.2.min.js"></script>
<script src="/assets/index.min.js?body=4.0.0"></script>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ffbcbbadeaf00526725e0f222ba832804' type='text/javascript'%3E%3C/script%3E"));
</script>
	</body>
</html>
