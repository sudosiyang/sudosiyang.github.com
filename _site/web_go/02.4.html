<!DOCTYPE HTML>
<html lang="en-US" >

    <head>

        <meta charset="UTF-8">
        <title>struct | Go Web 编程</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">




    <link rel="next" href="./02.5.html" />


    <link rel="prev" href="./02.3.html" />



    </head>
    <body>


<link rel="stylesheet" href="gitbook/style.css">



    <div class="book"  data-level="2.4" data-basepath="." data-revision="1419313468079">


<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">










        <li class="chapter " data-level="0" data-path="index.html">


                    <a href="./index.html">
                        <i class="fa fa-check"></i>

                         简介
                    </a>



        </li>


        <li class="chapter " data-level="1" data-path="01.0.html">


                    <a href="./01.0.html">
                        <i class="fa fa-check"></i>

                            <b>1.</b>

                         Go环境配置
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="1.1" data-path="01.1.html">


                    <a href="./01.1.html">
                        <i class="fa fa-check"></i>

                            <b>1.1.</b>

                         Go安装
                    </a>



        </li>


        <li class="chapter " data-level="1.2" data-path="01.2.html">


                    <a href="./01.2.html">
                        <i class="fa fa-check"></i>

                            <b>1.2.</b>

                         GOPATH 与工作空间
                    </a>



        </li>


        <li class="chapter " data-level="1.3" data-path="01.3.html">


                    <a href="./01.3.html">
                        <i class="fa fa-check"></i>

                            <b>1.3.</b>

                         Go 命令
                    </a>



        </li>


        <li class="chapter " data-level="1.4" data-path="01.4.html">


                    <a href="./01.4.html">
                        <i class="fa fa-check"></i>

                            <b>1.4.</b>

                         Go开发工具
                    </a>



        </li>


        <li class="chapter " data-level="1.5" data-path="01.5.html">


                    <a href="./01.5.html">
                        <i class="fa fa-check"></i>

                            <b>1.5.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="2" data-path="02.0.html">


                    <a href="./02.0.html">
                        <i class="fa fa-check"></i>

                            <b>2.</b>

                         Go语言基础
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="2.1" data-path="02.1.html">


                    <a href="./02.1.html">
                        <i class="fa fa-check"></i>

                            <b>2.1.</b>

                         你好，Go
                    </a>



        </li>


        <li class="chapter " data-level="2.2" data-path="02.2.html">


                    <a href="./02.2.html">
                        <i class="fa fa-check"></i>

                            <b>2.2.</b>

                         Go基础
                    </a>



        </li>


        <li class="chapter " data-level="2.3" data-path="02.3.html">


                    <a href="./02.3.html">
                        <i class="fa fa-check"></i>

                            <b>2.3.</b>

                         流程和函数
                    </a>



        </li>


        <li class="chapter active" data-level="2.4" data-path="02.4.html">


                    <a href="./02.4.html">
                        <i class="fa fa-check"></i>

                            <b>2.4.</b>

                         struct
                    </a>



        </li>


        <li class="chapter " data-level="2.5" data-path="02.5.html">


                    <a href="./02.5.html">
                        <i class="fa fa-check"></i>

                            <b>2.5.</b>

                         面向对象
                    </a>



        </li>


        <li class="chapter " data-level="2.6" data-path="02.6.html">


                    <a href="./02.6.html">
                        <i class="fa fa-check"></i>

                            <b>2.6.</b>

                         interface
                    </a>



        </li>


        <li class="chapter " data-level="2.7" data-path="02.7.html">


                    <a href="./02.7.html">
                        <i class="fa fa-check"></i>

                            <b>2.7.</b>

                         并发
                    </a>



        </li>


        <li class="chapter " data-level="2.8" data-path="02.8.html">


                    <a href="./02.8.html">
                        <i class="fa fa-check"></i>

                            <b>2.8.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="3" data-path="03.0.html">


                    <a href="./03.0.html">
                        <i class="fa fa-check"></i>

                            <b>3.</b>

                         Web基础
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="3.1" data-path="03.1.html">


                    <a href="./03.1.html">
                        <i class="fa fa-check"></i>

                            <b>3.1.</b>

                         web工作方式
                    </a>



        </li>


        <li class="chapter " data-level="3.2" data-path="03.2.html">


                    <a href="./03.2.html">
                        <i class="fa fa-check"></i>

                            <b>3.2.</b>

                         Go搭建一个简单的web服务
                    </a>



        </li>


        <li class="chapter " data-level="3.3" data-path="03.3.html">


                    <a href="./03.3.html">
                        <i class="fa fa-check"></i>

                            <b>3.3.</b>

                         Go如何使得web工作
                    </a>



        </li>


        <li class="chapter " data-level="3.4" data-path="03.4.html">


                    <a href="./03.4.html">
                        <i class="fa fa-check"></i>

                            <b>3.4.</b>

                         Go的http包详解
                    </a>



        </li>


        <li class="chapter " data-level="3.5" data-path="03.5.html">


                    <a href="./03.5.html">
                        <i class="fa fa-check"></i>

                            <b>3.5.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="4" data-path="04.0.html">


                    <a href="./04.0.html">
                        <i class="fa fa-check"></i>

                            <b>4.</b>

                         表单
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="4.1" data-path="04.1.html">


                    <a href="./04.1.html">
                        <i class="fa fa-check"></i>

                            <b>4.1.</b>

                         处理表单的输入
                    </a>



        </li>


        <li class="chapter " data-level="4.2" data-path="04.2.html">


                    <a href="./04.2.html">
                        <i class="fa fa-check"></i>

                            <b>4.2.</b>

                         验证表单的输入
                    </a>



        </li>


        <li class="chapter " data-level="4.3" data-path="04.3.html">


                    <a href="./04.3.html">
                        <i class="fa fa-check"></i>

                            <b>4.3.</b>

                         预防跨站脚本
                    </a>



        </li>


        <li class="chapter " data-level="4.4" data-path="04.4.html">


                    <a href="./04.4.html">
                        <i class="fa fa-check"></i>

                            <b>4.4.</b>

                         防止多次递交表单
                    </a>



        </li>


        <li class="chapter " data-level="4.5" data-path="04.5.html">


                    <a href="./04.5.html">
                        <i class="fa fa-check"></i>

                            <b>4.5.</b>

                         处理文件上传
                    </a>



        </li>


        <li class="chapter " data-level="4.6" data-path="04.6.html">


                    <a href="./04.6.html">
                        <i class="fa fa-check"></i>

                            <b>4.6.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="5" data-path="05.0.html">


                    <a href="./05.0.html">
                        <i class="fa fa-check"></i>

                            <b>5.</b>

                         访问数据库
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="5.1" data-path="05.1.html">


                    <a href="./05.1.html">
                        <i class="fa fa-check"></i>

                            <b>5.1.</b>

                         database/sql接口
                    </a>



        </li>


        <li class="chapter " data-level="5.2" data-path="05.2.html">


                    <a href="./05.2.html">
                        <i class="fa fa-check"></i>

                            <b>5.2.</b>

                         使用MySQL数据库
                    </a>



        </li>


        <li class="chapter " data-level="5.3" data-path="05.3.html">


                    <a href="./05.3.html">
                        <i class="fa fa-check"></i>

                            <b>5.3.</b>

                         使用SQLite数据库
                    </a>



        </li>


        <li class="chapter " data-level="5.4" data-path="05.4.html">


                    <a href="./05.4.html">
                        <i class="fa fa-check"></i>

                            <b>5.4.</b>

                         使用PostgreSQL数据库
                    </a>



        </li>


        <li class="chapter " data-level="5.5" data-path="05.5.html">


                    <a href="./05.5.html">
                        <i class="fa fa-check"></i>

                            <b>5.5.</b>

                         使用beedb库进行ORM开发
                    </a>



        </li>


        <li class="chapter " data-level="5.6" data-path="05.6.html">


                    <a href="./05.6.html">
                        <i class="fa fa-check"></i>

                            <b>5.6.</b>

                         NOSQL数据库操作
                    </a>



        </li>


        <li class="chapter " data-level="5.7" data-path="05.7.html">


                    <a href="./05.7.html">
                        <i class="fa fa-check"></i>

                            <b>5.7.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="6" data-path="06.0.html">


                    <a href="./06.0.html">
                        <i class="fa fa-check"></i>

                            <b>6.</b>

                         session和数据存储
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="6.1" data-path="06.1.html">


                    <a href="./06.1.html">
                        <i class="fa fa-check"></i>

                            <b>6.1.</b>

                         session和cookie
                    </a>



        </li>


        <li class="chapter " data-level="6.2" data-path="06.2.html">


                    <a href="./06.2.html">
                        <i class="fa fa-check"></i>

                            <b>6.2.</b>

                         Go如何使用session
                    </a>



        </li>


        <li class="chapter " data-level="6.3" data-path="06.3.html">


                    <a href="./06.3.html">
                        <i class="fa fa-check"></i>

                            <b>6.3.</b>

                         session存储
                    </a>



        </li>


        <li class="chapter " data-level="6.4" data-path="06.4.html">


                    <a href="./06.4.html">
                        <i class="fa fa-check"></i>

                            <b>6.4.</b>

                         预防session劫持
                    </a>



        </li>


        <li class="chapter " data-level="6.5" data-path="06.5.html">


                    <a href="./06.5.html">
                        <i class="fa fa-check"></i>

                            <b>6.5.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="7" data-path="07.0.html">


                    <a href="./07.0.html">
                        <i class="fa fa-check"></i>

                            <b>7.</b>

                         文本文件处理
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="7.1" data-path="07.1.html">


                    <a href="./07.1.html">
                        <i class="fa fa-check"></i>

                            <b>7.1.</b>

                         XML处理
                    </a>



        </li>


        <li class="chapter " data-level="7.2" data-path="07.2.html">


                    <a href="./07.2.html">
                        <i class="fa fa-check"></i>

                            <b>7.2.</b>

                         JSON处理
                    </a>



        </li>


        <li class="chapter " data-level="7.3" data-path="07.3.html">


                    <a href="./07.3.html">
                        <i class="fa fa-check"></i>

                            <b>7.3.</b>

                         正则处理
                    </a>



        </li>


        <li class="chapter " data-level="7.4" data-path="07.4.html">


                    <a href="./07.4.html">
                        <i class="fa fa-check"></i>

                            <b>7.4.</b>

                         模板处理
                    </a>



        </li>


        <li class="chapter " data-level="7.5" data-path="07.5.html">


                    <a href="./07.5.html">
                        <i class="fa fa-check"></i>

                            <b>7.5.</b>

                         文件操作
                    </a>



        </li>


        <li class="chapter " data-level="7.6" data-path="07.6.html">


                    <a href="./07.6.html">
                        <i class="fa fa-check"></i>

                            <b>7.6.</b>

                         字符串处理
                    </a>



        </li>


        <li class="chapter " data-level="7.7" data-path="07.7.html">


                    <a href="./07.7.html">
                        <i class="fa fa-check"></i>

                            <b>7.7.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="8" data-path="08.0.html">


                    <a href="./08.0.html">
                        <i class="fa fa-check"></i>

                            <b>8.</b>

                         Web服务
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="8.1" data-path="08.1.html">


                    <a href="./08.1.html">
                        <i class="fa fa-check"></i>

                            <b>8.1.</b>

                         Socket编程
                    </a>



        </li>


        <li class="chapter " data-level="8.2" data-path="08.2.html">


                    <a href="./08.2.html">
                        <i class="fa fa-check"></i>

                            <b>8.2.</b>

                         WebSocket
                    </a>



        </li>


        <li class="chapter " data-level="8.3" data-path="08.3.html">


                    <a href="./08.3.html">
                        <i class="fa fa-check"></i>

                            <b>8.3.</b>

                         REST
                    </a>



        </li>


        <li class="chapter " data-level="8.4" data-path="08.4.html">


                    <a href="./08.4.html">
                        <i class="fa fa-check"></i>

                            <b>8.4.</b>

                         RPC
                    </a>



        </li>


        <li class="chapter " data-level="8.5" data-path="08.5.html">


                    <a href="./08.5.html">
                        <i class="fa fa-check"></i>

                            <b>8.5.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="9" data-path="09.0.html">


                    <a href="./09.0.html">
                        <i class="fa fa-check"></i>

                            <b>9.</b>

                         安全与加密
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="9.1" data-path="09.1.html">


                    <a href="./09.1.html">
                        <i class="fa fa-check"></i>

                            <b>9.1.</b>

                         预防CSRF攻击
                    </a>



        </li>


        <li class="chapter " data-level="9.2" data-path="09.2.html">


                    <a href="./09.2.html">
                        <i class="fa fa-check"></i>

                            <b>9.2.</b>

                         确保输入过滤
                    </a>



        </li>


        <li class="chapter " data-level="9.3" data-path="09.3.html">


                    <a href="./09.3.html">
                        <i class="fa fa-check"></i>

                            <b>9.3.</b>

                         避免XSS攻击
                    </a>



        </li>


        <li class="chapter " data-level="9.4" data-path="09.4.html">


                    <a href="./09.4.html">
                        <i class="fa fa-check"></i>

                            <b>9.4.</b>

                         避免SQL注入
                    </a>



        </li>


        <li class="chapter " data-level="9.5" data-path="09.5.html">


                    <a href="./09.5.html">
                        <i class="fa fa-check"></i>

                            <b>9.5.</b>

                         存储密码
                    </a>



        </li>


        <li class="chapter " data-level="9.6" data-path="09.6.html">


                    <a href="./09.6.html">
                        <i class="fa fa-check"></i>

                            <b>9.6.</b>

                         加密和解密数据
                    </a>



        </li>


        <li class="chapter " data-level="9.7" data-path="09.7.html">


                    <a href="./09.7.html">
                        <i class="fa fa-check"></i>

                            <b>9.7.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="10" data-path="10.0.html">


                    <a href="./10.0.html">
                        <i class="fa fa-check"></i>

                            <b>10.</b>

                         国际化和本地化
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="10.1" data-path="10.1.html">


                    <a href="./10.1.html">
                        <i class="fa fa-check"></i>

                            <b>10.1.</b>

                         设置默认地区
                    </a>



        </li>


        <li class="chapter " data-level="10.2" data-path="10.2.html">


                    <a href="./10.2.html">
                        <i class="fa fa-check"></i>

                            <b>10.2.</b>

                         本地化资源
                    </a>



        </li>


        <li class="chapter " data-level="10.3" data-path="10.3.html">


                    <a href="./10.3.html">
                        <i class="fa fa-check"></i>

                            <b>10.3.</b>

                         国际化站点
                    </a>



        </li>


        <li class="chapter " data-level="10.4" data-path="10.4.html">


                    <a href="./10.4.html">
                        <i class="fa fa-check"></i>

                            <b>10.4.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="11" data-path="11.0.html">


                    <a href="./11.0.html">
                        <i class="fa fa-check"></i>

                            <b>11.</b>

                         错误处理，调试和测试
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="11.1" data-path="11.1.html">


                    <a href="./11.1.html">
                        <i class="fa fa-check"></i>

                            <b>11.1.</b>

                         错误处理
                    </a>



        </li>


        <li class="chapter " data-level="11.2" data-path="11.2.html">


                    <a href="./11.2.html">
                        <i class="fa fa-check"></i>

                            <b>11.2.</b>

                         使用GDB调试
                    </a>



        </li>


        <li class="chapter " data-level="11.3" data-path="11.3.html">


                    <a href="./11.3.html">
                        <i class="fa fa-check"></i>

                            <b>11.3.</b>

                         Go怎么写测试用例
                    </a>



        </li>


        <li class="chapter " data-level="11.4" data-path="11.4.html">


                    <a href="./11.4.html">
                        <i class="fa fa-check"></i>

                            <b>11.4.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="12" data-path="12.0.html">


                    <a href="./12.0.html">
                        <i class="fa fa-check"></i>

                            <b>12.</b>

                         部署与维护
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="12.1" data-path="12.1.html">


                    <a href="./12.1.html">
                        <i class="fa fa-check"></i>

                            <b>12.1.</b>

                         应用日志
                    </a>



        </li>


        <li class="chapter " data-level="12.2" data-path="12.2.html">


                    <a href="./12.2.html">
                        <i class="fa fa-check"></i>

                            <b>12.2.</b>

                         网站错误处理
                    </a>



        </li>


        <li class="chapter " data-level="12.3" data-path="12.3.html">


                    <a href="./12.3.html">
                        <i class="fa fa-check"></i>

                            <b>12.3.</b>

                         应用部署
                    </a>



        </li>


        <li class="chapter " data-level="12.4" data-path="12.4.html">


                    <a href="./12.4.html">
                        <i class="fa fa-check"></i>

                            <b>12.4.</b>

                         备份和恢复
                    </a>



        </li>


        <li class="chapter " data-level="12.5" data-path="12.5.html">


                    <a href="./12.5.html">
                        <i class="fa fa-check"></i>

                            <b>12.5.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="13" data-path="13.0.html">


                    <a href="./13.0.html">
                        <i class="fa fa-check"></i>

                            <b>13.</b>

                         如何设计一个Web框架
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="13.1" data-path="13.1.html">


                    <a href="./13.1.html">
                        <i class="fa fa-check"></i>

                            <b>13.1.</b>

                         项目规划
                    </a>



        </li>


        <li class="chapter " data-level="13.2" data-path="13.2.html">


                    <a href="./13.2.html">
                        <i class="fa fa-check"></i>

                            <b>13.2.</b>

                         自定义路由器设计
                    </a>



        </li>


        <li class="chapter " data-level="13.3" data-path="13.3.html">


                    <a href="./13.3.html">
                        <i class="fa fa-check"></i>

                            <b>13.3.</b>

                         controller设计
                    </a>



        </li>


        <li class="chapter " data-level="13.4" data-path="13.4.html">


                    <a href="./13.4.html">
                        <i class="fa fa-check"></i>

                            <b>13.4.</b>

                         日志和配置设计
                    </a>



        </li>


        <li class="chapter " data-level="13.5" data-path="13.5.html">


                    <a href="./13.5.html">
                        <i class="fa fa-check"></i>

                            <b>13.5.</b>

                         实现博客的增删改
                    </a>



        </li>


        <li class="chapter " data-level="13.6" data-path="13.6.html">


                    <a href="./13.6.html">
                        <i class="fa fa-check"></i>

                            <b>13.6.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="14" data-path="14.0.html">


                    <a href="./14.0.html">
                        <i class="fa fa-check"></i>

                            <b>14.</b>

                         扩展Web框架
                    </a>



            <ul class="articles">



        <li class="chapter " data-level="14.1" data-path="14.1.html">


                    <a href="./14.1.html">
                        <i class="fa fa-check"></i>

                            <b>14.1.</b>

                         静态文件支持
                    </a>



        </li>


        <li class="chapter " data-level="14.2" data-path="14.2.html">


                    <a href="./14.2.html">
                        <i class="fa fa-check"></i>

                            <b>14.2.</b>

                         Session支持
                    </a>



        </li>


        <li class="chapter " data-level="14.3" data-path="14.3.html">


                    <a href="./14.3.html">
                        <i class="fa fa-check"></i>

                            <b>14.3.</b>

                         表单支持
                    </a>



        </li>


        <li class="chapter " data-level="14.4" data-path="14.4.html">


                    <a href="./14.4.html">
                        <i class="fa fa-check"></i>

                            <b>14.4.</b>

                         用户认证
                    </a>



        </li>


        <li class="chapter " data-level="14.5" data-path="14.5.html">


                    <a href="./14.5.html">
                        <i class="fa fa-check"></i>

                            <b>14.5.</b>

                         多语言支持
                    </a>



        </li>


        <li class="chapter " data-level="14.6" data-path="14.6.html">


                    <a href="./14.6.html">
                        <i class="fa fa-check"></i>

                            <b>14.6.</b>

                         pprof支持
                    </a>



        </li>


        <li class="chapter " data-level="14.7" data-path="14.7.html">


                    <a href="./14.7.html">
                        <i class="fa fa-check"></i>

                            <b>14.7.</b>

                         小结
                    </a>



        </li>


            </ul>

        </li>


        <li class="chapter " data-level="15" data-path="ref.html">


                    <a href="./ref.html">
                        <i class="fa fa-check"></i>

                            <b>15.</b>

                         参考资料
                    </a>



        </li>




        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>

    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>

    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->

    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>



    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>


    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>


    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>



    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Go Web 编程</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">


                    <section class="normal" id="section-gitbook_15">

                        <h1 id="24-struct">2.4 struct类型</h1>
<h2 id="struct">struct</h2>
<p>Go语言中，也和C或者其他语言一样，我们可以声明新的类型，作为其它类型的属性或字段的容器。例如，我们可以创建一个自定义类型<code>person</code>代表一个人的实体。这个实体拥有属性：姓名和年龄。这样的类型我们称之<code>struct</code>。如下代码所示:</p>
<pre><code>type person struct {
    name string
    age int
}
</code></pre><p>看到了吗？声明一个struct如此简单，上面的类型包含有两个字段</p>
<ul>
<li>一个string类型的字段name，用来保存用户名称这个属性</li>
<li>一个int类型的字段age,用来保存用户年龄这个属性</li>
</ul>
<p>如何使用struct呢？请看下面的代码</p>
<pre><code>type person struct {
    name string
    age int
}

var P person  // P现在就是person类型的变量了

P.name = &quot;Astaxie&quot;  // 赋值&quot;Astaxie&quot;给P的name属性.
P.age = 25  // 赋值&quot;25&quot;给变量P的age属性
fmt.Printf(&quot;The person&#39;s name is %s&quot;, P.name)  // 访问P的name属性.
</code></pre><p>除了上面这种P的声明使用之外，还有另外几种声明使用方式：</p>
<ul>
<li><p>1.按照顺序提供初始化值</p>
<p>  P := person{&quot;Tom&quot;, 25}</p>
</li>
<li><p>2.通过<code>field:value</code>的方式初始化，这样可以任意顺序</p>
<p>  P := person{age:24, name:&quot;Tom&quot;}</p>
</li>
<li><p>3.当然也可以通过<code>new</code>函数分配一个指针，此处P的类型为*person</p>
<p>  P := new(person)</p>
</li>
</ul>
<p>下面我们看一个完整的使用struct的例子</p>
<pre><code>package main
import &quot;fmt&quot;

// 声明一个新的类型
type person struct {
    name string
    age int
}

// 比较两个人的年龄，返回年龄大的那个人，并且返回年龄差
// struct也是传值的
func Older(p1, p2 person) (person, int) {
    if p1.age&gt;p2.age {  // 比较p1和p2这两个人的年龄
        return p1, p1.age-p2.age
    }
    return p2, p2.age-p1.age
}

func main() {
    var tom person

    // 赋值初始化
    tom.name, tom.age = &quot;Tom&quot;, 18

    // 两个字段都写清楚的初始化
    bob := person{age:25, name:&quot;Bob&quot;}

    // 按照struct定义顺序初始化值
    paul := person{&quot;Paul&quot;, 43}

    tb_Older, tb_diff := Older(tom, bob)
    tp_Older, tp_diff := Older(tom, paul)
    bp_Older, bp_diff := Older(bob, paul)

    fmt.Printf(&quot;Of %s and %s, %s is older by %d years\n&quot;,
        tom.name, bob.name, tb_Older.name, tb_diff)

    fmt.Printf(&quot;Of %s and %s, %s is older by %d years\n&quot;,
        tom.name, paul.name, tp_Older.name, tp_diff)

    fmt.Printf(&quot;Of %s and %s, %s is older by %d years\n&quot;,
        bob.name, paul.name, bp_Older.name, bp_diff)
}
</code></pre><h3 id="struct">struct的匿名字段</h3>
<p>我们上面介绍了如何定义一个struct，定义的时候是字段名与其类型一一对应，实际上Go支持只提供类型，而不写字段名的方式，也就是匿名字段，也称为嵌入字段。</p>
<p>当匿名字段是一个struct的时候，那么这个struct所拥有的全部字段都被隐式地引入了当前定义的这个struct。</p>
<p>让我们来看一个例子，让上面说的这些更具体化</p>
<pre><code>package main
import &quot;fmt&quot;

type Human struct {
    name string
    age int
    weight int
}

type Student struct {
    Human  // 匿名字段，那么默认Student就包含了Human的所有字段
    speciality string
}

func main() {
    // 我们初始化一个学生
    mark := Student{Human{&quot;Mark&quot;, 25, 120}, &quot;Computer Science&quot;}

    // 我们访问相应的字段
    fmt.Println(&quot;His name is &quot;, mark.name)
    fmt.Println(&quot;His age is &quot;, mark.age)
    fmt.Println(&quot;His weight is &quot;, mark.weight)
    fmt.Println(&quot;His speciality is &quot;, mark.speciality)
    // 修改对应的备注信息
    mark.speciality = &quot;AI&quot;
    fmt.Println(&quot;Mark changed his speciality&quot;)
    fmt.Println(&quot;His speciality is &quot;, mark.speciality)
    // 修改他的年龄信息
    fmt.Println(&quot;Mark become old&quot;)
    mark.age = 46
    fmt.Println(&quot;His age is&quot;, mark.age)
    // 修改他的体重信息
    fmt.Println(&quot;Mark is not an athlet anymore&quot;)
    mark.weight += 60
    fmt.Println(&quot;His weight is&quot;, mark.weight)
}
</code></pre><p>图例如下:</p>
<p><img src="images/2.4.student_struct.png?raw=true" alt=""></p>
<p>图2.7 Student和Human的方法继承</p>
<p>我们看到Student访问属性age和name的时候，就像访问自己所有用的字段一样，对，匿名字段就是这样，能够实现字段的继承。是不是很酷啊？还有比这个更酷的呢，那就是student还能访问Human这个字段作为字段名。请看下面的代码，是不是更酷了。</p>
<pre><code>mark.Human = Human{&quot;Marcus&quot;, 55, 220}
mark.Human.age -= 1
</code></pre><p>通过匿名访问和修改字段相当的有用，但是不仅仅是struct字段哦，所有的内置类型和自定义类型都是可以作为匿名字段的。请看下面的例子</p>
<pre><code>package main
import &quot;fmt&quot;

type Skills []string

type Human struct {
    name string
    age int
    weight int
}

type Student struct {
    Human  // 匿名字段，struct
    Skills // 匿名字段，自定义的类型string slice
    int    // 内置类型作为匿名字段
    speciality string
}

func main() {
    // 初始化学生Jane
    jane := Student{Human:Human{&quot;Jane&quot;, 35, 100}, speciality:&quot;Biology&quot;}
    // 现在我们来访问相应的字段
    fmt.Println(&quot;Her name is &quot;, jane.name)
    fmt.Println(&quot;Her age is &quot;, jane.age)
    fmt.Println(&quot;Her weight is &quot;, jane.weight)
    fmt.Println(&quot;Her speciality is &quot;, jane.speciality)
    // 我们来修改他的skill技能字段
    jane.Skills = []string{&quot;anatomy&quot;}
    fmt.Println(&quot;Her skills are &quot;, jane.Skills)
    fmt.Println(&quot;She acquired two new ones &quot;)
    jane.Skills = append(jane.Skills, &quot;physics&quot;, &quot;golang&quot;)
    fmt.Println(&quot;Her skills now are &quot;, jane.Skills)
    // 修改匿名内置类型字段
    jane.int = 3
    fmt.Println(&quot;Her preferred number is&quot;, jane.int)
}
</code></pre><p>从上面例子我们看出来struct不仅仅能够将struct作为匿名字段、自定义类型、内置类型都可以作为匿名字段，而且可以在相应的字段上面进行函数操作（如例子中的append）。</p>
<p>这里有一个问题：如果human里面有一个字段叫做phone，而student也有一个字段叫做phone，那么该怎么办呢？</p>
<p>Go里面很简单的解决了这个问题，最外层的优先访问，也就是当你通过<code>student.phone</code>访问的时候，是访问student里面的字段，而不是human里面的字段。</p>
<p>这样就允许我们去重载通过匿名字段继承的一些字段，当然如果我们想访问重载后对应匿名类型里面的字段，可以通过匿名字段名来访问。请看下面的例子</p>
<pre><code>package main
import &quot;fmt&quot;

type Human struct {
    name string
    age int
    phone string  // Human类型拥有的字段
}

type Employee struct {
    Human  // 匿名字段Human
    speciality string
    phone string  // 雇员的phone字段
}

func main() {
    Bob := Employee{Human{&quot;Bob&quot;, 34, &quot;777-444-XXXX&quot;}, &quot;Designer&quot;, &quot;333-222&quot;}
    fmt.Println(&quot;Bob&#39;s work phone is:&quot;, Bob.phone)
    // 如果我们要访问Human的phone字段
    fmt.Println(&quot;Bob&#39;s personal phone is:&quot;, Bob.Human.phone)
}
</code></pre><h2 id="links">links</h2>
<ul>
<li><a href="preface.html">目录</a></li>
<li>上一章: <a href="02.3.html">流程和函数</a></li>
<li>下一节: <a href="02.5.html">面向对象</a></li>
</ul>


                    </section>


                </div>
            </div>
        </div>


        <a href="./02.3.html" class="navigation navigation-prev " aria-label="Previous page: 流程和函数"><i class="fa fa-angle-left"></i></a>


        <a href="./02.5.html" class="navigation navigation-next " aria-label="Next page: 面向对象"><i class="fa fa-angle-right"></i></a>

    </div>
</div>


<script src="gitbook/app.js"></script>


    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>



    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>


<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>


    </body>

</html>
